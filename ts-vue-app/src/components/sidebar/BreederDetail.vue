<!-- components/sidebar/BreederDetail.vue -->
<script setup lang="ts">
import { computed } from 'vue';
import type { æ¯ç•œå®ä½“ } from '@/core/entities';

const props = defineProps<{
  breeder: æ¯ç•œå®ä½“;
}>();

function getStatusColor(value: number): string {
  if (value >= 80) return 'success';
  if (value >= 50) return 'warning';
  return 'danger';
}
</script>

<template>
  <div class="breeder-detail">
    <!-- åŸºæœ¬ä¿¡æ¯ -->
    <section class="detail-section">
      <div class="breeder-header">
        <div class="breeder-avatar">ğŸ‘©</div>
        <div class="breeder-basic">
          <h2 class="breeder-name">{{ breeder.è·å–å±æ€§('å§“å') }}</h2>
          <div class="breeder-tags">
            <span class="tag tag--race">{{ breeder.è·å–å±æ€§('ç§æ—') }}</span>
            <span class="tag tag--identity">{{ breeder.è·å–å±æ€§('åŸèº«ä»½') }}</span>
          </div>
          <div class="breeder-meta">
            <span>{{ breeder.è·å–å±æ€§('å¹´é¾„') }}å²</span>
            <span>Â·</span>
            <span>é­…åŠ› {{ breeder.è·å–å±æ€§('é­…åŠ›') }}</span>
          </div>
        </div>
      </div>
    </section>

    <!-- çŠ¶æ€ -->
    <section class="detail-section">
      <h3 class="section-title">çŠ¶æ€</h3>
      <div class="status-bars">
        <div class="status-item">
          <div class="status-header">
            <span class="status-label">è‡£æœåº¦</span>
            <span class="status-value" :class="`status-value--${getStatusColor(breeder.è·å–å±æ€§('è‡£æœåº¦'))}`">
              {{ breeder.è·å–å±æ€§('è‡£æœåº¦') }}%
            </span>
          </div>
          <div class="status-bar">
            <div
              class="status-fill status-fill--success"
              :style="{ width: `${breeder.è·å–å±æ€§('è‡£æœåº¦')}%` }"
            ></div>
          </div>
        </div>

        <div class="status-item">
          <div class="status-header">
            <span class="status-label">æ·«ä¹±åº¦</span>
            <span class="status-value">{{ breeder.è·å–å±æ€§('æ·«ä¹±åº¦') }}%</span>
          </div>
          <div class="status-bar">
            <div
              class="status-fill status-fill--danger"
              :style="{ width: `${breeder.è·å–å±æ€§('æ·«ä¹±åº¦')}%` }"
            ></div>
          </div>
        </div>

        <div class="status-item">
          <div class="status-header">
            <span class="status-label">ç”Ÿè‚²åŠ›</span>
            <span class="status-value">
              {{ breeder.è·å–å±æ€§('å‰©ä½™ç”Ÿè‚²åŠ›') }} / {{ breeder.è·å–å±æ€§('æ€»ç”Ÿè‚²åŠ›') }}
            </span>
          </div>
          <div class="status-bar">
            <div
              class="status-fill status-fill--accent"
              :style="{ width: `${(breeder.è·å–å±æ€§('å‰©ä½™ç”Ÿè‚²åŠ›') / breeder.è·å–å±æ€§('æ€»ç”Ÿè‚²åŠ›')) * 100}%` }"
            ></div>
          </div>
        </div>
      </div>
    </section>

    <!-- ç”Ÿè‚²è®°å½• -->
    <section class="detail-section">
      <h3 class="section-title">ç”Ÿè‚²è®°å½•</h3>
      <div class="birth-stats">
        <div class="birth-stat">
          <span class="birth-icon">ğŸ‘º</span>
          <span class="birth-value">{{ breeder.å† å†›ç”Ÿè‚²è®°å½•.length }}</span>
          <span class="birth-label">å† å†›</span>
        </div>
        <div class="birth-stat">
          <span class="birth-icon">ğŸ‘¥</span>
          <span class="birth-value">{{ breeder.å–½å•°ç”Ÿè‚²è®°å½• }}</span>
          <span class="birth-label">å–½å•°</span>
        </div>
      </div>

      <div v-if="breeder.å† å†›ç”Ÿè‚²è®°å½•.length > 0" class="champion-list">
        <div v-for="è®°å½• in breeder.å† å†›ç”Ÿè‚²è®°å½•" :key="è®°å½•.è·å–å±æ€§('å§“å')" class="champion-record">
          <span class="record-icon">ğŸ‘º</span>
          <span class="record-name">{{ è®°å½•.è·å–å±æ€§('å§“å') }}...</span>
          <span class="record-turn">ç”± {{ è®°å½•.ç”Ÿæ¯?.è·å–å±æ€§('å§“å') }} äº§å‡º</span>
        </div>
      </div>
    </section>

    <!-- ç‰¹æ®Šèƒ½åŠ› -->
    <section class="detail-section" v-if="breeder.è·å–å±æ€§('ç‰¹æ®Šèƒ½åŠ›')">
      <h3 class="section-title">ç‰¹æ®Šèƒ½åŠ›</h3>
      <div class="ability-card">
        <span class="ability-icon">âœ¨</span>
        <span class="ability-name">{{ breeder.è·å–å±æ€§('ç‰¹æ®Šèƒ½åŠ›') }}</span>
      </div>
    </section>

    <!-- æ“ä½œæŒ‰é’® -->
    <div class="detail-actions">
      <button class="btn btn--primary btn--block">è°ƒæ•™</button>
      <button class="btn btn--accent btn--block">ç¹æ®–</button>
      <button class="btn btn--ghost btn--block">åŠæ…°</button>
    </div>
  </div>
</template>

<style scoped lang="scss">
@use '@/styles/variables' as *;

.breeder-detail {
  display: flex;
  flex-direction: column;
  gap: $spacing-xl;
}

.detail-section {
  padding-bottom: $spacing-lg;
  border-bottom: 1px solid $border-dark;

  &:last-of-type {
    border-bottom: none;
  }
}

.section-title {
  font-size: $font-size-sm;
  font-weight: 600;
  color: $text-muted;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin: 0 0 $spacing-md;
}

.breeder-header {
  display: flex;
  align-items: flex-start;
  gap: $spacing-lg;
}

.breeder-avatar {
  width: 72px;
  height: 72px;
  background: linear-gradient(135deg, #ffd1dc 0%, #ffb6c1 100%);
  border: 3px solid $border-light;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.5rem;
}

.breeder-basic {
  flex: 1;
}

.breeder-name {
  font-size: $font-size-xl;
  font-weight: 700;
  color: $text-highlight;
  margin: 0 0 $spacing-sm;
}

.breeder-tags {
  display: flex;
  gap: $spacing-xs;
  margin-bottom: $spacing-sm;
}

.tag {
  padding: 2px $spacing-sm;
  border-radius: $radius-sm;
  font-size: $font-size-xs;

  &--race {
    background: rgba($color-info, 0.2);
    color: lighten($color-info, 20%);
  }

  &--identity {
    background: rgba($color-primary, 0.2);
    color: $color-primary-light;
  }
}

.breeder-meta {
  font-size: $font-size-sm;
  color: $text-muted;
  display: flex;
  gap: $spacing-sm;
}

.status-bars {
  display: flex;
  flex-direction: column;
  gap: $spacing-md;
}

.status-item {
  .status-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: $spacing-xs;

    .status-label {
      font-size: $font-size-sm;
      color: $text-secondary;
    }

    .status-value {
      font-size: $font-size-sm;
      font-weight: 600;

      &--success { color: $color-success; }
      &--warning { color: $color-warning; }
      &--danger { color: $color-danger; }
    }
  }

  .status-bar {
    height: 8px;
    background: $bg-light;
    border-radius: 4px;
    overflow: hidden;
  }

  .status-fill {
    height: 100%;
    border-radius: 4px;
    transition: width $transition-base;

    &--success { background: $color-success; }
    &--accent { background: $color-accent; }
    &--danger { background: $color-danger; }
  }
}

.birth-stats {
  display: flex;
  gap: $spacing-lg;
  margin-bottom: $spacing-md;
}

.birth-stat {
  display: flex;
  align-items: center;
  gap: $spacing-sm;
  padding: $spacing-md;
  background: $bg-medium;
  border-radius: $radius-md;
  flex: 1;

  .birth-icon {
    font-size: $font-size-xl;
  }

  .birth-value {
    font-size: $font-size-xl;
    font-weight: 700;
    color: $text-highlight;
  }

  .birth-label {
    font-size: $font-size-sm;
    color: $text-muted;
  }
}

.champion-list {
  display: flex;
  flex-direction: column;
  gap: $spacing-xs;
  max-height: 120px;
  overflow-y: auto;
}

.champion-record {
  display: flex;
  align-items: center;
  gap: $spacing-sm;
  padding: $spacing-sm $spacing-md;
  background: $bg-medium;
  border-radius: $radius-sm;
  font-size: $font-size-sm;

  .record-icon {
    font-size: $font-size-base;
  }

  .record-name {
    flex: 1;
    color: $text-primary;
  }

  .record-turn {
    color: $text-muted;
  }
}

.ability-card {
  display: flex;
  align-items: center;
  gap: $spacing-sm;
  padding: $spacing-md;
  background: rgba($color-accent, 0.1);
  border: 1px solid $color-accent;
  border-radius: $radius-md;

  .ability-icon {
    font-size: $font-size-xl;
  }

  .ability-name {
    font-weight: 500;
    color: $color-accent;
  }
}

.detail-actions {
  display: flex;
  flex-direction: column;
  gap: $spacing-sm;
  margin-top: auto;
  padding-top: $spacing-lg;
}
</style>
